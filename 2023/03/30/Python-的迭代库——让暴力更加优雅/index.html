

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=dark>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/cf.png">
  <link rel="icon" href="/img/cf.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="kai_Ker">
  <meta name="keywords" content="">
  
    <meta name="description" content="你是否被层层叠叠的循环搞得焦头烂额？你是否想用全排列但是不想写递归？让 itertools 库帮你排忧纾难！">
<meta property="og:type" content="article">
<meta property="og:title" content="Python 的迭代库——让暴力更加优雅">
<meta property="og:url" content="https://swkfk.github.io/2023/03/30/Python-%E7%9A%84%E8%BF%AD%E4%BB%A3%E5%BA%93%E2%80%94%E2%80%94%E8%AE%A9%E6%9A%B4%E5%8A%9B%E6%9B%B4%E5%8A%A0%E4%BC%98%E9%9B%85/index.html">
<meta property="og:site_name" content="kai_Ker&#39;s blog">
<meta property="og:description" content="你是否被层层叠叠的循环搞得焦头烂额？你是否想用全排列但是不想写递归？让 itertools 库帮你排忧纾难！">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-03-30T12:04:41.000Z">
<meta property="article:modified_time" content="2023-03-30T13:07:35.534Z">
<meta property="article:author" content="kai_Ker">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="itertools">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>Python 的迭代库——让暴力更加优雅 - kai_Ker&#39;s blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"swkfk.github.io","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":"§"},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"G1VoB0vFukiQqVlBnTSM6KHp-gzGzoHsz","app_key":"Nes0wy2fSU9n1r5P1LFKGVmy","server_url":"https://g1vob0vf.lc-cn-n1-shared.com","path":"window.location.pathname","ignore_local":true}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  

  

  
    
  



  

  

  <script type="text/javascript">
    // window.onload = function() {
    
      // document.getElementById("busuanzi_container_page_pv").setAttribute("style", "display: inline;");
    
      // document.getElementById("busuanzi_container_site_pv").setAttribute("style", "display: inline;");
      // document.getElementById("busuanzi_container_site_uv").setAttribute("style", "display: inline;");
    // }
  </script>

<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>kai_Ker&#39;s blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                <span>友链</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/banner-post.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Python 的迭代库——让暴力更加优雅"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-03-30 20:04" pubdate>
          2023年3月30日 周四
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          2.1k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          18 分钟
        
      </span>
    

    
    
      
        <span id="leancloud-page-views-container" class="post-meta" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="leancloud-page-views"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Python 的迭代库——让暴力更加优雅</h1>
            
            
              <div class="markdown-body">
                
                <p>你是否被层层叠叠的循环搞得焦头烂额？你是否想用全排列但是不想写递归？让 <code>itertools</code> 库帮你排忧纾难！</p>
<span id="more"></span>

<h1 id="官方怎么说"><a href="#官方怎么说" class="headerlink" title="官方怎么说"></a>官方怎么说</h1><blockquote>
<p>The module standardizes a core set of fast, memory efficient tools that are useful by themselves or in combination. Together, they form an “iterator algebra” making it possible to construct specialized tools succinctly and efficiently in pure Python.  —- Python 3.11 documentation</p>
</blockquote>
<p>这个模块提供了一套核心的 <strong>快速</strong> 的、<strong>节省内存</strong> 的工具，这些工具可以被 “他们自己” 或者在 ”组合数学“ 中被高效地使用。他们共同形成了一个 ”迭代<strong>算法</strong>“，这使得在 <strong>纯 Python</strong> 中构建一系列专门的、简洁的、高效的工具成为可能。</p>
<p>（这段话明明每个单词都认识，怎么翻译起来这么难 QAQ）</p>
<p>因此，这个库是 Python 原生的（意味着不需要通过 <code>pip</code> 安装），同时在时间、空间上均是高效的，并且，最重要的是，这个库用起来很简洁！</p>
<h1 id="关于-“迭代器”-以及本文档的使用"><a href="#关于-“迭代器”-以及本文档的使用" class="headerlink" title="关于 “迭代器” 以及本文档的使用"></a>关于 “迭代器” 以及本文档的使用</h1><p>平心而论，Python 有三个 “器”：迭代器、生成器、装饰器，是相当复杂的，应该属于 Python 高级编程的范围。但如果只是 “用用”，大体是涉及不到这些高深内容的。本文介绍到的函数大多返回的不是简单的列表，而是迭代器，只有真正用到某一项时，该项才会被计算。</p>
<p>本文只是自己的一个记录与备忘，同时也起到了与大家分享 Python 的作用。毕竟，这么方便的东西，谁用谁上瘾。本文争取做到比中文互联网现有资料更全面、更具体，但也更易用。</p>
<p>众所周知，Python 支持可变参数列表，就是同一个函数你可以传入不同数目的参数，在下述介绍中，<strong>中括号括起来的参数表示可选</strong>。</p>
<h1 id="组合迭代器（Combinatoric-iterators）"><a href="#组合迭代器（Combinatoric-iterators）" class="headerlink" title="组合迭代器（Combinatoric iterators）"></a>组合迭代器（Combinatoric iterators）</h1><p>这类迭代器深谙组合数学之道，组合、排列一应俱全。</p>
<h2 id="排列：permutations-p-r"><a href="#排列：permutations-p-r" class="headerlink" title="排列：permutations(p[, r])"></a>排列：permutations(p[, r])</h2><p><code>p</code> 是一个可迭代的对象（如字符串、列表等等），函数返回的迭代器可以生成 <code>p</code> 中元素的 <strong>排列</strong>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> itertools.permutations(<span class="hljs-string">&quot;ABCD&quot;</span>):<br>    <span class="hljs-built_in">print</span>(i)  <span class="hljs-comment"># the type of `i` is &quot;tuple&quot;</span><br></code></pre></td></tr></table></figure>

<p>结果为：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs text">(&#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;, &#x27;D&#x27;)<br>(&#x27;A&#x27;, &#x27;B&#x27;, &#x27;D&#x27;, &#x27;C&#x27;)<br>(&#x27;A&#x27;, &#x27;C&#x27;, &#x27;B&#x27;, &#x27;D&#x27;)<br>(&#x27;A&#x27;, &#x27;C&#x27;, &#x27;D&#x27;, &#x27;B&#x27;)<br>... ...<br>(&#x27;D&#x27;, &#x27;C&#x27;, &#x27;A&#x27;, &#x27;B&#x27;)<br>(&#x27;D&#x27;, &#x27;C&#x27;, &#x27;B&#x27;, &#x27;A&#x27;)<br></code></pre></td></tr></table></figure>

<p>若指定参数 <code>r</code>，则表示选取的元素个数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> itertools.permutations(<span class="hljs-string">&quot;ABCD&quot;</span>, <span class="hljs-number">2</span>):<br>    <span class="hljs-built_in">print</span>(i)<br></code></pre></td></tr></table></figure>

<p>结果为：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs text">(&#x27;A&#x27;, &#x27;B&#x27;)<br>(&#x27;A&#x27;, &#x27;C&#x27;)<br>(&#x27;A&#x27;, &#x27;D&#x27;)<br>(&#x27;B&#x27;, &#x27;A&#x27;)<br>(&#x27;B&#x27;, &#x27;C&#x27;)<br>(&#x27;B&#x27;, &#x27;D&#x27;)<br>(&#x27;C&#x27;, &#x27;A&#x27;)<br>(&#x27;C&#x27;, &#x27;B&#x27;)<br>(&#x27;C&#x27;, &#x27;D&#x27;)<br>(&#x27;D&#x27;, &#x27;A&#x27;)<br>(&#x27;D&#x27;, &#x27;B&#x27;)<br>(&#x27;D&#x27;, &#x27;C&#x27;)<br></code></pre></td></tr></table></figure>

<h2 id="组合：combinations-p-r"><a href="#组合：combinations-p-r" class="headerlink" title="组合：combinations(p, r)"></a>组合：combinations(p, r)</h2><h2 id="可重复的组合：combinations-with-replacement-p-r"><a href="#可重复的组合：combinations-with-replacement-p-r" class="headerlink" title="可重复的组合：combinations_with_replacement(p, r)"></a>可重复的组合：combinations_with_replacement(p, r)</h2><h2 id="笛卡尔积：product"><a href="#笛卡尔积：product" class="headerlink" title="笛卡尔积：product()"></a>笛卡尔积：product()</h2><h1 id="无穷迭代器（Infinite-iterators）"><a href="#无穷迭代器（Infinite-iterators）" class="headerlink" title="无穷迭代器（Infinite iterators）"></a>无穷迭代器（Infinite iterators）</h1><p>顾名思义，如果不停下来，他们就会无穷无尽！（你明白为什么迭代器和普通的列表不一样了吗）</p>
<h2 id="循环：cycle"><a href="#循环：cycle" class="headerlink" title="循环：cycle()"></a>循环：cycle()</h2><h2 id="重复：repeat"><a href="#重复：repeat" class="headerlink" title="重复：repeat()"></a>重复：repeat()</h2><h2 id="数数：count"><a href="#数数：count" class="headerlink" title="数数：count()"></a>数数：count()</h2><h1 id="有穷迭代器（Iterators-terminating-on-the-shortest-input-sequence）"><a href="#有穷迭代器（Iterators-terminating-on-the-shortest-input-sequence）" class="headerlink" title="有穷迭代器（Iterators terminating on the shortest input sequence）"></a>有穷迭代器（Iterators terminating on the shortest input sequence）</h1><p>这类迭代器会按照一定的规则进行计算，当时是可以穷尽的 ~</p>
<h2 id="累加：accumulate"><a href="#累加：accumulate" class="headerlink" title="累加：accumulate()"></a>累加：accumulate()</h2>
                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Python-%E6%95%99%E7%A8%8B/" class="category-chain-item">Python 教程</a>
  
  
    <span>></span>
    
  <a href="/categories/Python-%E6%95%99%E7%A8%8B/%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/" class="category-chain-item">入门教程</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Python/">#Python</a>
      
        <a href="/tags/itertools/">#itertools</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Python 的迭代库——让暴力更加优雅</div>
      <div>https://swkfk.github.io/2023/03/30/Python-的迭代库——让暴力更加优雅/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>kai_Ker</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年3月30日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
                <a target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/">
                  <span class="hint--top hint--rounded" aria-label="NC - 非商业性使用">
                    <i class="iconfont icon-nc"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/03/23/Dev-%E7%BC%96%E8%AF%91%E6%8A%A5%E9%94%99%E4%B8%8E%E8%AD%A6%E5%91%8A%E4%BF%A1%E6%81%AF%E8%A7%A3%E8%AF%BB/" title="Dev 编译报错与警告信息解读">
                        <span class="hidden-mobile">Dev 编译报错与警告信息解读</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        总访问量 
        <span id="leancloud-site-pv"></span>
         次
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        总访客数 
        <span id="leancloud-site-uv"></span>
         人
      </span>
    
    

  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":150,"height":300,"vOffset":-50},"mobile":{"show":false},"log":false});</script></body>
</html>
